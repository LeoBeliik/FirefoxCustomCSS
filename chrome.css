/*TODO: 
* urlbar hides too fast
* change firefox tab logo for search logo
* hide the icons in the urlbar when no focus/hover and use the search icon
*/

:root {
  --WindowDraggingFromNewtabButton: no-drag

}  /*  For windows  */
/*
:root{--WindowDraggingFromNewtabButton: drag !important}  /* For linux */
:root {
  --tab-border-radius: 3px !important;
  --NavbarWidth: 13;
  --TabsHeight: 36;
  --TabsBorder: 8;
  --NavbarHeightSmall: calc(var(--TabsHeight) + var(--TabsBorder));
  --speed: 250ms;
}

/*only when not in settongs or new tab*/
#navigator-toolbox:has(.tabbrowser-tab:not([label="New Tab"], [label="Settings"])[selected]) {
  #nav-bar {
    margin-top: calc(var(--TabsHeight) * -1px - var(--TabsBorder) * 1px)!important;
    height: calc(var(--TabsHeight) * 1px + var(--TabsBorder) * 1px);
    margin-right: auto !important;
  }
  #TabsToolbar {
    margin-left: calc(1325px / 100 * var(--NavbarWidth)) !important;
  }
  &:has(#forward-button:not([disabled])) #TabsToolbar {
    margin-left: calc(1325px / 100 * var(--NavbarWidth) + 30px) !important;
  }
  &:has(#back-button[disabled]) #TabsToolbar {
    margin-left: calc(1325px / 100 * var(--NavbarWidth) - 30px) !important;
  }
  &:has(#downloads-button:not([hidden])) #TabsToolbar {
    margin-left: calc(1325px / 100 * var(--NavbarWidth) + 30px) !important;
  }
  toolbarspring {
    display: none !important;
  }
  #urlbar-container {
    width: 24px !important;
  }
  #urlbar {
    width: 24px !important;
  }
  &:has(#urlbar:hover),
  &:has(#urlbar:focus-within) {
    #nav-bar {
      margin-right: 175px !important;
    }
    #urlbar {
      width: 100% !important;
      transition: width 500ms linear 500ms !important;
    }
  }
  &:has(#urlbar:focus-within) #urlbar {
    transition: none !important;
  }
  #urlbar:not([breakout-extend]):hover {
    outline: 2px auto aqua !important;
  }
  #urlbar[breakout-extend] {
    margin-top: 3px !important;
    margin-left: 12px !important;
  }
}
#navigator-toolbox:has(.tabbrowser-tab[label="New Tab"][selected]) {
  #reload-button,
  #stop-button,
  #home-button {
    display: none !important;
  }
  #urlbar[breakout-extend] {
    margin-left: 10px !important;
    margin-top: 3px !important;
    width: 98% !important;
  }
}
#nav-bar,
#PersonalToolbar {
  background-color: #0000 !important;
  background-image: none !important;
  box-shadow: none !important;
  margin-top: -12px !important;
  margin-bottom: -1px !important;
  transition: all 150ms linear !important;
}

/*Removes flash before loading pages  */
:root {
  --tabpanel-background-color: -moz-Dialog !important;
}
.titlebar-spacer[type="pre-tabs"],
.titlebar-spacer[type="post-tabs"] {
  display: none !important;
}

/*Makes some buttons nicer  */
#unified-extensions-button,
#back-button,
#forward-button,
#home-button {
  padding: 2px !important;
  margin: 5px -1px 0px -1px !important;
}
#PanelUI-menu-button {
  padding: 2px !important;
  margin: 5px -5px -1px -1px !important;
}
#reload-button,
#stop-button {
  margin: 7px -5px 0px -4px !important;
}
#downloads-button {
  margin: 7px -10px 0px -2px !important;
}

/*Removes annoying border  */
#navigator-toolbox {
  border:none !important;
}

/*Makes the space between the reload button and the urlbar less akwardly large  */
#urlbar-container {
  margin: 7px 20px 0px -4px !important;
}

/*  Navbar buttons order  */
#nav-bar {
  direction: rtl;
}
#urlbar-container,
#customizationui-widget-panel {
  direction: ltr !important;
}

/*  Devtools  */
.devtools-horizontal-splitter {
  margin-top: 7px !important;
  margin-bottom:-12px !important;
  opacity: 0;
}
.devtools-side-splitter {
  opacity: 0;
}
.devtools-toolbox-side-iframe {
  margin-top: -10px;
  border-radius: 10px;
}
#customization-panelWrapper {
  max-width: 30em!important;
}  

/*Fixes the customization page  */
#customization-container > * {
  margin-top: -10px;
  background-color: -moz-Dialog !important;
}

/*Private tabs  */
[privatebrowsingmode="temporary"] #PanelUI-menu-button > .toolbarbutton-badge-stack {
  fill: currentColor !important;
  -moz-context-properties: fill !important;
  list-style-image: url("data:image/svg+xml,%3Csvg version='1.1' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m4.4607598 4.7745347c-1.6558046-0.022972-3.308558 0.6945846-4.38033889 2.1016252-0.24667376 0.9746947 0.1329625 4.5740951 0.34896868 5.1407791 0.43334585 2.286732 2.30300841 4.007931 4.54440651 4.007931 1.1186988 0 2.1336268-0.446805 2.9349832-1.161493l0.4869937-0.419283a2.4174054 2.4174054 0 0 1 3.138115-0.02344l0.734397 0.606788v-0.0026c0.772021 0.621352 1.717989 1.002634 2.752686 1.002634 2.240064 0 4.109726-1.721199 4.544406-4.007931 0.214673-0.569353 0.608977-4.1526899 0.348969-5.1433851-1.905389-2.5014054-5.647401-2.8223737-7.976801-0.682312l-1.302122 1.1979524h-1.2760796l-1.302122-1.1979524c-1.0196962-0.936277-2.3086136-1.4014458-3.5964616-1.4193132zm1.0390935 3.6954225c0.9293602 0 1.7557821 0.389533 2.2891309 0.992217a0.86669252 0.86669252 0 0 1 0 1.1302418c-0.5333488 0.602685-1.3597707 0.989614-2.2891309 0.989614-0.9293601 0-1.7557821-0.386929-2.2891308-0.989614a0.86669252 0.86669252 0 0 1 0-1.1302418c0.5333487-0.602684 1.3597707-0.992217 2.2891308-0.992217zm9.0002687 0c0.929359 0 1.755781 0.389533 2.289131 0.992217a0.86669252 0.86669252 0 0 1 0 1.1302418c-0.53335 0.602685-1.359772 0.989614-2.289131 0.989614-0.92936 0-1.755782-0.386929-2.289131-0.989614a0.86669252 0.86669252 0 0 1 0-1.1302418c0.533349-0.602684 1.359771-0.992217 2.289131-0.992217z' fill='context-fill' stroke-width='1.33337'/%3E%3C/svg%3E%0A");
}
#private-browsing-indicator-with-label {
  display: none;
}

/*  Notification  */
#tab-notification-deck .container.infobar {
  background: -moz-Dialog !important;
}
#tab-notification-deck .notificationbox-stack {
  background: transparent !important;
}

/*  Customization navbar fix  */
#wrapper-urlbar-container {
  width: 100px !important;
}
[title="Flexible Space"] {
  display: none !important;
}

/*Fullscreen thing  */
#fullscreen-warning {
  border: none !important;
  background: -moz-Dialog !important;
}
#main-menubar {
  z-index: 1;
}

/*hide back, forward buttons when not active */
#back-button[disabled],
#forward-button[disabled] {
  display: none;
}

/*hide reload and home button in new page
#navigator-toolbox:has(.tabbrowser-tab[label="New Tab"][selected]) #reload-button,
#navigator-toolbox:has(.tabbrowser-tab[label="New Tab"][selected]) #home-button {
  display: none !important;
}*/

/*floating Bookmarks and History panels */
#sidebar-box {
  position: fixed !important;
  top: 36px !important;
  bottom: 2px !important;
  left: 0px !important;
  width: 450px !important;
  border-radius: 8px !important;
  border: 2px solid rgb(113, 112, 120) !important;
  z-index: 1000 !important;
}

/*hide new tab button when not hovering */
#tabs-newtab-button {
  opacity: 0;
  transition: var(--speed) opacity ease;
  transition-delay: var(--speed) !important;
}
#navigator-toolbox:hover #tabs-newtab-button {
  opacity: 80%;
  transition: var(--speed) opacity ease;
}
#tabs-newtab-button .toolbarbutton-icon {
  padding: 2px !important;
  width: 20px !important;
  height: 20px !important;
}

/*hide the close button from non active tabs */
#tabbrowser-tabs .tabbrowser-tab:not([pinned],
[selected],
:hover) .tab-close-button {
  opacity: 0 !important;
}
#tabbrowser-tabs .close-icon {
  padding: 1px !important;
  width: 14px !important;
  height: 14px !important;
  margin-top: 2px !important;
}
#tabbrowser-tabs .tab-close-button:hover {
  background-color: rgb(182, 21, 35) !important;
}

/*tabs smaller when not focused */
.tabbrowser-tab[style=""] {
  transition: min-width var(--speed) cubic-bezier(0.270, 0.910, 0.435, 1.280), 
              max-width var(--speed) cubic-bezier(0.270, 0.910, 0.435, 1.280), 
              height 100ms ease !important;
  transition-delay: translateX 5s !important;
}
.tabbrowser-tab[fadein]:not([pinned]) {
  max-width: 150px !important;
}
.tabbrowser-tab[selected]:not([pinned]) {
  min-width: 250px !important;
  max-width: 250px !important;
}

/*minimize, maximize, and close buttons are smaller and closer together*/
.titlebar-button.titlebar-min,
.titlebar-button.titlebar-restore,
.titlebar-button.titlebar-max,
.titlebar-button.titlebar-close {
  width: 8px !important;
}

/*color the max and min buttons*/
.titlebar-button.titlebar-min:hover {
  background: rgb(65,105,225) !important;
}
.titlebar-button.titlebar-max:hover,
.titlebar-button.titlebar-restore:hover {
  background: rgb(207,181,59) !important;
}
